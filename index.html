<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pickleball Haven - Sân Pickleball Chuyên Nghiệp</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS styles remain the same as before */
        /* ... (all the CSS code from earlier) ... */
    </style>
</head>
<body>
    <!-- HTML structure remains the same as before -->
    <!-- ... (all the HTML code from earlier) ... -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
            // Form submission
            const bookingForm = document.getElementById('bookingForm');
            if (bookingForm) {
                bookingForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Lấy dữ liệu từ form
                    const formData = {
                        name: document.getElementById('name').value,
                        phone: document.getElementById('phone').value,
                        email: document.getElementById('email').value,
                        courtType: document.getElementById('courtType').value,
                        date: document.getElementById('date').value,
                        time: document.getElementById('time').value,
                        duration: document.getElementById('duration').value,
                        message: document.getElementById('message').value,
                        timestamp: new Date().toISOString()
                    };
                    
                    // Gửi dữ liệu đến Google Sheets
                    saveBookingToGoogleSheets(formData);
                });
            }
            
            // Newsletter subscription
            const newsletterForm = document.getElementById('newsletterForm');
            if (newsletterForm) {
                newsletterForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    alert('Cảm ơn bạn đã đăng ký nhận tin!');
                    newsletterForm.reset();
                });
            }
            
            // Set min date to today
            const dateInput = document.getElementById('date');
            if (dateInput) {
                const today = new Date().toISOString().split('T')[0];
                dateInput.setAttribute('min', today);
            }
        });
        
        // Hàm gửi dữ liệu đến Google Sheets
        function saveBookingToGoogleSheets(bookingData) {
            // Thay thế URL_CUA_WEB_APP_SCRIPT bằng URL Web App của bạn
            const scriptURL = 'URL_CUA_WEB_APP_SCRIPT';
            
            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(bookingData)
            })
            .then(() => {
                showModal();
            })
            .catch(error => {
                console.error('Error:', error);
                // Fallback to localStorage if request fails
                saveBookingToLocalStorage(bookingData);
            });
        }
        
        // Hàm dự phòng lưu vào LocalStorage
        function saveBookingToLocalStorage(bookingData) {
            let bookings = JSON.parse(localStorage.getItem('pickleballBookings')) || [];
            bookings.push(bookingData);
            localStorage.setItem('pickleballBookings', JSON.stringify(bookings));
            
            console.log('Booking saved to localStorage:', bookingData);
            showModal();
        }
        
        // Hiển thị modal
        function showModal() {
            const modal = document.getElementById('successModal');
            if (modal) {
                modal.style.display = 'flex';
            }
        }
        
        // Đóng modal
        function closeModal() {
            const modal = document.getElementById('successModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // Đóng modal khi click bên ngoài
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('successModal');
            if (event.target === modal) {
                closeModal();
            }
        });
    </script>
</body>
</html>
